<h1>Login</h1>

<form [formGroup]="loginForm" (ngSubmit)="loginRequest$.next(loginForm.value)" data-testid="Login">
    <mat-card>
        <mat-card-content>
            <mat-form-field>
                <mat-label>Email address</mat-label>
                
                <input type="email"
                       data-testid="Email"
                       matInput
                       formControlName="email"
                       placeholder="Your email address">
                
                <mat-error appFormControlErrors controlName="email"></mat-error>
            </mat-form-field>

            <br>

            <mat-form-field>
                <mat-label>Password</mat-label>
                <input type="password"
                       data-testid="Password"
                       matInput
                       formControlName="password"
                       placeholder="Your password">

                <mat-error appFormControlErrors controlName="password"></mat-error>
            </mat-form-field>
        </mat-card-content>

        <mat-card-actions>
            <div style="display: flex; gap: 16px; align-items: center">
                <button type="submit"
                        data-testid="Submit"
                        mat-raised-button
                        color="primary"
                        [disabled]="loggingIn$ | async">
                    Sign in
                </button>

                <mat-spinner *ngIf="loggingIn$ | async"
                data-testid="Spinner"
                             [diameter]="24">
                </mat-spinner>
            </div>

            <br>
            <br>

            <p>
                <a
                data-testid="forgotten-passwordlink"
                [routerLink]="['/forgotten-password']">
                    Forgotten password?
                </a>
            </p>
        </mat-card-actions>
    </mat-card>
</form>
