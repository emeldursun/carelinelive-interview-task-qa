<ng-container *ngIf="!hasBeenSubmitted; else submitted">
    <h1>Forgotten your password?</h1>

    <form [formGroup]="forgottenPasswordForm"
    data-testid="ForgottenPassword"
          (ngSubmit)="submit()">
        <mat-card>

            <mat-card-content>
                <p>
                    If you can't remember your password, enter your email address below and we'll send you a link to
                    reset it.
                </p>

                <mat-form-field>
                    <mat-label>Email address</mat-label>

                    <input type="email"
                           data-testid="ForgottenPasswordEmail"
                           matInput
                           formControlName="email"
                           placeholder="Your email address">

                    <mat-error appFormControlErrors controlName="email"
                    data-testid="EmailErrorMessage"
                    
                    ></mat-error>
                    
                </mat-form-field>
            </mat-card-content>

            <mat-card-actions>
                <button type="submit"
                        data-testid="ResetPassword"
                        mat-raised-button
                        color="primary"
                        [disabled]="forgottenPasswordForm.invalid">
                    Reset password
                </button>

                <br>
                <br>

                <a [routerLink]="['/login']">Back to login</a>
            </mat-card-actions>
        </mat-card>
    </form>
</ng-container>

<ng-template #submitted>
        
    
    <h1>We've sent you an email</h1>
    
    <mat-card 
        data-testid="EmailSent">
        
        <mat-card-content>
            We've sent an email to {{ forgottenPasswordForm.value.email }} with details on how to reset your password.
        </mat-card-content>

        <mat-card-content>
            <a [routerLink]="['/login']">Back to login</a>
        </mat-card-content>
    </mat-card>
</ng-template>
